(this["webpackJsonpmap-churchs"]=this["webpackJsonpmap-churchs"]||[]).push([[0],{17:function(e,t,a){e.exports=a(28)},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),o=a.n(r),u=a(2),l=a(3),i=a(14),h=a(15),s=a(1),d="https://api.weatherapi.com/v1/forecast.json?key=".concat("7fff07755d0c42e5a3e120823202209","&q="),m={churchData:[],currentTargetChurch:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;return"ADD_CHURCH_DATA_FROM_API"===a?Object(s.a)(Object(s.a)({},e),{},{churchData:Object(h.a)(n)}):"ADD_CURRENT_TARGET_CHURCH"===a?Object(s.a)(Object(s.a)({},e),{},{currentTargetChurch:n}):e},p={city:"",geoData:null,lat:"40.730610",lon:"-73.935242"},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;return"SEARCH_CITY"===a?Object(s.a)(Object(s.a)({},e),{},{city:n}):"ADD_GEO_DATA"===a?Object(s.a)(Object(s.a)({},e),{},{geoData:n,lat:n.lat,lon:n.lon}):e},_=Object(l.c)({churchData:f,searchCity:b}),C=Object(l.d)(_,Object(l.a)(i.a)),E=a(7),D=function(e){return function(t){t({type:"ADD_CHURCH_DATA_FROM_API",payload:e})}},y=function(e){return{type:"ADD_CURRENT_TARGET_CHURCH",payload:e}},g=function(e){return{type:"SEARCH_CITY",payload:e}},A=function(e){return function(t){t({type:"ADD_GEO_DATA",payload:e})}},O=Object(u.b)((function(e){return{churchData:e.churchData.churchData,geoData:e.searchCity.geoData,lat:e.searchCity.lat,lon:e.searchCity.lon}}),(function(e){return{addChurchDataFromApi:function(t){return e(D(t))},addCurrentTargetChurch:function(t){return e(y(t))}}}))((function(e){var t=e.churchData,a=e.lat,r=e.lon,o=e.addChurchDataFromApi,u=e.addCurrentTargetChurch,l={center:[a,r],zoom:13};Object(n.useEffect)((function(){fetch("https://apiv4.updateparishdata.org/Churchs/?lat=".concat(a,"&long=").concat(r,"&pg=1")).then((function(e){return e.json()})).then((function(e){var t=[];e.forEach((function(e){var a={id:Date.now()+e.latitude,lat:e.latitude,lon:e.longitude,name:e.name,churchAddressStreet:e.church_address_street_address,phoneNumber:e.phone_number,siteURL:e.url};t.push(a)})),o(t)})).catch((function(e){return console.log(e)}))}),[a,r]);return c.a.createElement(E.c,null,c.a.createElement("div",null,c.a.createElement(E.a,{state:l,className:"ymap"},t.map((function(e){return c.a.createElement(E.b,{key:e.id,geometry:[e.lat,e.lon],properties:{hintContent:e.name,balloonContentHeader:e.name,balloonContentBody:e.churchAddressStreet},modules:["geoObject.addon.balloon","geoObject.addon.hint"],options:{iconLayout:"default#image",iconImageSize:[30,42],iconImageOffset:[-3,-42]},onClick:function(){return function(e){var a=t.filter((function(t){return t.id===e}));u(a[0])}(e.id)}})})))))})),v=function(e){var t=e.name,a=e.address,n=e.phone,r=e.url,o="tel:".concat(n);return c.a.createElement("div",{className:"block"},c.a.createElement("div",{className:"container"},c.a.createElement("h2",{className:"block__title"},t),c.a.createElement("p",{className:"block__text block__text--address"},a),c.a.createElement("a",{className:"block__link block__link--phone",href:o},n),c.a.createElement("a",{className:"block__link block__link--site",href:r},r)))},j=a(16),N=Object(u.b)((function(e){return{searchCityName:e.searchCity.city}}),(function(e){return{addNameCity:function(t){return e(g(t))},addGeoData:function(t){return e(A(t))}}}))((function(e){var t=e.searchCityName,a=e.addNameCity,r=e.addGeoData,o=Object(n.useState)(""),u=Object(j.a)(o,2),l=u[0],i=u[1];Object(n.useEffect)((function(){t&&fetch("".concat(d).concat(t,"&days=3")).then((function(e){return e.json()})).then((function(e){var t={name:e.location.name,lat:e.location.lat,lon:e.location.lon};r(t)})).catch((function(e){return console.log(e)}))}),[t]);return c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"form"},c.a.createElement("input",{className:"form__inp",onChange:function(e){return i(e.target.value)},placeholder:"city name",value:l}),c.a.createElement("button",{className:"form__btn",onClick:function(){a(l),i("")}},c.a.createElement("span",null,"Search!")))})),T=Object(u.b)((function(e){return{currentTargetChurch:e.churchData.currentTargetChurch}}),null)((function(e){var t=e.currentTargetChurch;return c.a.createElement("div",null,c.a.createElement(N,null),t&&c.a.createElement(v,{name:t.name,address:t.churchAddressStreet,phone:t.phoneNumber,url:t.siteURL}),c.a.createElement(O,null))})),k=(a(27),function(){return c.a.createElement(u.a,{store:C},c.a.createElement("div",{className:"Application"},c.a.createElement(T,null)))});o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.fde23b47.chunk.js.map